{"ast":null,"code":"import{useEffect,useState}from\"react\";import Post from\"./Post\";import PostCreate from\"./PostCreate\";import Stack from\"@mui/material/Stack\";import api from\"../api/axios\";import{Grid}from\"@mui/material\";import Friends from\"./Friends\";import{useNavigate}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{setAlertMsg}from\"../features/authSlice\";import{setUpdate,setPosts}from\"../features/feedSlice\";import SuggestedFriends from\"./SuggestedFriends\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Feed=function Feed(_ref){var removeFriend=_ref.removeFriend;var navigate=useNavigate();var dispatch=useDispatch();var update=useSelector(function(state){var _state$feed;return(_state$feed=state.feed)===null||_state$feed===void 0?void 0:_state$feed.update;});var posts=useSelector(function(state){return state.feed.posts;});useEffect(function(){api.get(\"/feed?user=\"+userID).then(function(res){dispatch(setPosts(res.data.feed));console.log(res.data.suggestedFriends);}).catch(function(err){console.log(\"Error: \",err);});},[update]);var userOb=useSelector(function(state){var _state$auth;return(_state$auth=state.auth)===null||_state$auth===void 0?void 0:_state$auth.userOb;});var userID=userOb._id;var _ref2=!posts?{friendPosts:[],myPosts:[]}:posts,friendPosts=_ref2.friendPosts,myPosts=_ref2.myPosts;var totalPosts=friendPosts===null||friendPosts===void 0?void 0:friendPosts.concat(myPosts);var totalPostsSorted=totalPosts===null||totalPosts===void 0?void 0:totalPosts.sort(function(a,b){return new Date(b.date)-new Date(a.date);});return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"20px\",width:\"100%\"},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2,children:/*#__PURE__*/_jsx(Friends,{navigate:navigate,removeFriend:removeFriend})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsx(PostCreate,{setUpdate:setUpdate,update:update}),/*#__PURE__*/_jsx(Stack,{spacing:2,sx:{marginTop:\"10px\"},children:totalPostsSorted===null||totalPostsSorted===void 0?void 0:totalPostsSorted.map(function(post){return/*#__PURE__*/_jsx(Post,{navigate:navigate,post:post},post._id);})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2,children:/*#__PURE__*/_jsx(SuggestedFriends,{navigate:navigate})})]})});};export default Feed;","map":{"version":3,"names":["useEffect","useState","Post","PostCreate","Stack","api","Grid","Friends","useNavigate","useSelector","useDispatch","setAlertMsg","setUpdate","setPosts","SuggestedFriends","jsx","_jsx","jsxs","_jsxs","Feed","_ref","removeFriend","navigate","dispatch","update","state","_state$feed","feed","posts","get","userID","then","res","data","console","log","suggestedFriends","catch","err","userOb","_state$auth","auth","_id","_ref2","friendPosts","myPosts","totalPosts","concat","totalPostsSorted","sort","a","b","Date","date","style","marginTop","width","children","container","spacing","item","xs","md","sx","map","post"],"sources":["C:/Users/Naor/Desktop/code/Summer Projects/SocialPlace/social/src/components/Feed.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Post from \"./Post\";\r\nimport PostCreate from \"./PostCreate\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport api from \"../api/axios\";\r\nimport { Grid } from \"@mui/material\";\r\nimport Friends from \"./Friends\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { setAlertMsg } from \"../features/authSlice\";\r\nimport { setUpdate, setPosts } from \"../features/feedSlice\";\r\nimport SuggestedFriends from \"./SuggestedFriends\";\r\n\r\nconst Feed = ({ removeFriend }) => {\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n    const update = useSelector((state) => state.feed?.update);\r\n    const posts = useSelector((state) => state.feed.posts);\r\n    useEffect(() => {\r\n        api\r\n            .get(\"/feed?user=\" + userID)\r\n            .then((res) => {\r\n                dispatch(setPosts(res.data.feed));\r\n                console.log(res.data.suggestedFriends)\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"Error: \", err);\r\n            });\r\n    }, [update]);\r\n\r\n    const userOb = useSelector((state) => state.auth?.userOb);\r\n    const userID = userOb._id;\r\n    const { friendPosts, myPosts } = !posts\r\n        ? { friendPosts: [], myPosts: [] }\r\n        : posts;\r\n    const totalPosts = friendPosts?.concat(myPosts);\r\n    const totalPostsSorted = totalPosts?.sort((a, b) => {\r\n        return new Date(b.date) - new Date(a.date);\r\n    });\r\n\r\n\r\n    return (\r\n        <div style={{ marginTop: \"20px\", width: \"100%\" }}>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12} md={2}>\r\n                    <Friends navigate={navigate}  removeFriend={removeFriend} />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} md={8}>\r\n                    <PostCreate setUpdate={setUpdate} update={update} />\r\n\r\n                    <Stack spacing={2} sx={{ marginTop: \"10px\" }}>\r\n                        {totalPostsSorted?.map((post) => (\r\n                            <Post navigate={navigate} key={post._id} post={post} />\r\n                        ))}\r\n                    </Stack>\r\n                </Grid>\r\n\r\n                <Grid item xs={12} md={2}>\r\n                    <SuggestedFriends navigate={navigate}/>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default Feed;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}